drop SEQUENCE seqHistoryId;

CREATE SEQUENCE seqHistoryId
MINVALUE 1
START WITH 1
INCREMENT BY 1;


drop table medicines cascade constraints;
drop table users cascade constraints;
drop table cart cascade constraints;
drop table userHistory cascade constraints;
drop table History cascade constraints;



create table Medicines(
medId number primary key ,
medName varchar(50) not null,
desciption varchar(50) not null,
medPrice number not null,
medAmount number not null,
medCategory varchar(50) not null
);


create table users(
userId number primary key,
gender varchar(50) not null,
userName varchar(50) not null,
userAge number not NULL,
userPassword varchar(50) not null);


create table cart(
cartUserId number references users (userId),
cartMedId number references Medicines (medId),
amount number not null,
constraint PK_D primary key (cartUserId, cartMedId)
);


create table userHistory(
historyID number  PRIMARY KEY ,
userId number references users (userId),
total number not null,
timeP varchar(50) not null
);
commit;                     

create table History(
historyId number references userHistory (historyId),
medId number references medicines (medId),
amount number not null
);

commit;




create or replace
procedure GetAllMeds(MID OUT sys_refcursor)
AS
begin
OPEN mid for
SELECT * from medicines;
end;